C=0;stop=t=>C&&C.close(C=0);c=(t=0,e,a)=>(t<e&&(t=e),t>a?a:t);play=(e,a)=>{C=new AudioContext;(z=C.createOscillator()).connect(g=C.createGain()).connect(C.destination);z.type="square";z.start();t=0;v=(e,a)=>e.setValueAtTime(a,t);for(m of e.matchAll(/(\d*)?(\.?)(#?)([a-g-])(\d*)/g)){k=m[4].charCodeAt();n=0|((k&7)*1.6+8)%12+!!m[3]+12*c(m[5],1,3);v(z.frequency,261.63*2**(n/12));v(g.gain,(~k&8)/8);t=t+240/a/c(m[1]||4,1,64)*(1+!!m[2]/2);v(g.gain,0)}};
